{"ast":null,"code":"import _defineProperty from\"/Users/ivanlapsov/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ivanlapsov/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ivanlapsov/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import PopupWithForm from\"./PopupWithForm.js\";import{CurrentUserContext}from\"../contexts/CurrentUserContext.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser;var currentUser=React.useContext(CurrentUserContext);var _React$useState=React.useState(\"Сохранить\"),_React$useState2=_slicedToArray(_React$useState,2),isContentSubmitButton=_React$useState2[0],setContentSubmitButton=_React$useState2[1];var _React$useState3=React.useState({name:\"\",description:\"\"}),_React$useState4=_slicedToArray(_React$useState3,2),formValues=_React$useState4[0],setFormValues=_React$useState4[1];var name=formValues.name,description=formValues.description;var handleFormValues=React.useCallback(function(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormValues(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});},[setFormValues]);React.useEffect(function(){setFormValues({name:currentUser.name,description:currentUser.about});},[currentUser,isOpen]);function handleSubmit(evt){evt.preventDefault();renderLoading(true);onUpdateUser({name:name,about:description,onRenderLoading:function onRenderLoading(){renderLoading(false);}});}function renderLoading(isLoading){isLoading?setContentSubmitButton(\"Сохранение...\"):setContentSubmitButton(\"Сохранить\");}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"profile\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_field_name\",value:name||\"\",onChange:handleFormValues,type:\"text\",id:\"userName\",name:\"name\",required:true,minLength:\"2\",maxLength:\"40\",placeholder:\"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form__field-error\",id:\"error-userName\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_field_description\",value:description||\"\",onChange:handleFormValues,type:\"text\",id:\"userJob\",name:\"description\",required:true,minLength:\"2\",maxLength:\"200\",placeholder:\"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0447\\u0435\\u043C \\u0432\\u044B \\u0437\\u0430\\u043D\\u0438\\u043C\\u0430\\u0435\\u0442\\u0435\\u0441\\u044C\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form__field-error\",id:\"error-userJob\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-save\",type:\"submit\",children:isContentSubmitButton})]});}export default EditProfilePopup;","map":{"version":3,"names":["React","PopupWithForm","CurrentUserContext","EditProfilePopup","isOpen","onClose","onUpdateUser","currentUser","useContext","useState","isContentSubmitButton","setContentSubmitButton","name","description","formValues","setFormValues","handleFormValues","useCallback","evt","target","value","prevState","useEffect","about","handleSubmit","preventDefault","renderLoading","onRenderLoading","isLoading"],"sources":["/Users/ivanlapsov/dev/mesto-react/src/components/EditProfilePopup.js"],"sourcesContent":["import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [isContentSubmitButton, setContentSubmitButton] =\n    React.useState(\"Сохранить\");\n\n  const [formValues, setFormValues] = React.useState({\n    name: \"\",\n    description: \"\",\n  });\n  const { name, description } = formValues;\n\n  const handleFormValues = React.useCallback(\n    (evt) => {\n      const { name, value } = evt.target;\n      setFormValues((prevState) => ({ ...prevState, [name]: value }));\n    },\n    [setFormValues]\n  );\n\n  React.useEffect(() => {\n    setFormValues({\n      name: currentUser.name,\n      description: currentUser.about,\n    });\n  }, [currentUser, isOpen]);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    renderLoading(true);\n    onUpdateUser({\n      name,\n      about: description,\n      onRenderLoading: () => {\n        renderLoading(false);\n      },\n    });\n  }\n\n  function renderLoading(isLoading) {\n    isLoading\n      ? setContentSubmitButton(\"Сохранение...\")\n      : setContentSubmitButton(\"Сохранить\");\n  }\n\n  return (\n    <PopupWithForm\n      name=\"profile\"\n      title=\"Редактировать профиль\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <div className=\"form__field\">\n        <input\n          className=\"form__input form__input_field_name\"\n          value={name || \"\"}\n          onChange={handleFormValues}\n          type=\"text\"\n          id=\"userName\"\n          name=\"name\"\n          required\n          minLength=\"2\"\n          maxLength=\"40\"\n          placeholder=\"Напишите ваше имя\"\n        />\n        <span className=\"form__field-error\" id=\"error-userName\"></span>\n      </div>\n      <div className=\"form__field\">\n        <input\n          className=\"form__input form__input_field_description\"\n          value={description || \"\"}\n          onChange={handleFormValues}\n          type=\"text\"\n          id=\"userJob\"\n          name=\"description\"\n          required\n          minLength=\"2\"\n          maxLength=\"200\"\n          placeholder=\"Напишите чем вы занимаетесь\"\n        />\n        <span className=\"form__field-error\" id=\"error-userJob\"></span>\n      </div>\n      <button className=\"button-save\" type=\"submit\">\n        {isContentSubmitButton}\n      </button>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}