{"ast":null,"code":"import _defineProperty from\"/Users/ivanlapsov/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ivanlapsov/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ivanlapsov/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRef,useState,useCallback,useEffect}from\"react\";import PopupWithForm from\"./PopupWithForm.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateAvatar=_ref.onUpdateAvatar;var imageRef=useRef();var _useState=useState('Сохранить'),_useState2=_slicedToArray(_useState,2),isContentSubmitButton=_useState2[0],setContentSubmitButton=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,1),setFormValues=_useState4[0];var handleFormValues=useCallback(function(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormValues(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});},[setFormValues]);function handleSubmit(evt){evt.preventDefault();renderLoading(true);onUpdateAvatar({avatar:imageRef.current.value,onRenderLoading:function onRenderLoading(){renderLoading(false);}});}useEffect(function(){imageRef.current.value='';},[setFormValues,isOpen]);function renderLoading(isLoading){isLoading?setContentSubmitButton('Сохранение...'):setContentSubmitButton('Сохранить');}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"edit-avatar\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{ref:imageRef,onChange:handleFormValues,className:\"form__input form__input_field_link-avatar\",type:\"url\",id:\"avatar\",name:\"avatar\",required:true,placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0432\\u0430\\u0448\\u0435 \\u043D\\u043E\\u0432\\u043E\\u0435 \\u0444\\u043E\\u0442\\u043E\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form__field-error\",id:\"error-avatar\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-save\",type:\"submit\",children:isContentSubmitButton})]});}export default EditAvatarPopup;","map":{"version":3,"names":["useRef","useState","useCallback","useEffect","PopupWithForm","EditAvatarPopup","isOpen","onClose","onUpdateAvatar","imageRef","isContentSubmitButton","setContentSubmitButton","setFormValues","handleFormValues","evt","target","name","value","prevState","handleSubmit","preventDefault","renderLoading","avatar","current","onRenderLoading","isLoading"],"sources":["/Users/ivanlapsov/dev/react-mesto-auth/src/components/EditAvatarPopup.js"],"sourcesContent":["import { useRef, useState, useCallback, useEffect } from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\n\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\n  const imageRef = useRef();\n  const [isContentSubmitButton, setContentSubmitButton] = useState('Сохранить');\n  const [setFormValues] = useState('');\n\n  const handleFormValues = useCallback((evt)=>{\n    const { name, value } = evt.target\n    setFormValues(prevState=>({...prevState, [name]: value}))\n  }, [setFormValues]);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    renderLoading(true);\n    onUpdateAvatar(\n      {avatar: imageRef.current.value,\n      onRenderLoading: ()=>{\n        renderLoading(false)\n      }\n    })\n  }\n\n  useEffect(() => {\n    imageRef.current.value = ''\n  },[setFormValues, isOpen])\n\n  function renderLoading(isLoading){\n    isLoading ? setContentSubmitButton('Сохранение...') : setContentSubmitButton('Сохранить')\n  }\n\n  return(\n    <PopupWithForm\n      name=\"edit-avatar\"\n      title=\"Обновить аватар\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}>\n      <div className=\"form__field\">\n        <input\n          ref={imageRef}\n          onChange={handleFormValues}\n          className=\"form__input form__input_field_link-avatar\"\n          type=\"url\"\n          id=\"avatar\"\n          name=\"avatar\"\n          required\n          placeholder=\"Ссылка на ваше новое фото\"/>\n        <span className=\"form__field-error\" id=\"error-avatar\"></span>\n      </div>\n      <button className=\"button-save\" type=\"submit\">{isContentSubmitButton}</button>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n"],"mappings":"qXAAA,OAASA,MAAT,CAAiBC,QAAjB,CAA2BC,WAA3B,CAAwCC,SAAxC,KAAyD,OAAzD,CACA,MAAOC,cAAP,KAA0B,oBAA1B,C,wFAEA,QAASC,gBAAT,MAA4D,IAAlCC,OAAkC,MAAlCA,MAAkC,CAA1BC,OAA0B,MAA1BA,OAA0B,CAAjBC,cAAiB,MAAjBA,cAAiB,CAC1D,GAAMC,SAAQ,CAAGT,MAAM,EAAvB,CACA,cAAwDC,QAAQ,CAAC,WAAD,CAAhE,wCAAOS,qBAAP,eAA8BC,sBAA9B,eACA,eAAwBV,QAAQ,CAAC,EAAD,CAAhC,yCAAOW,aAAP,eAEA,GAAMC,iBAAgB,CAAGX,WAAW,CAAC,SAACY,GAAD,CAAO,CAC1C,gBAAwBA,GAAG,CAACC,MAA5B,CAAQC,IAAR,aAAQA,IAAR,CAAcC,KAAd,aAAcA,KAAd,CACAL,aAAa,CAAC,SAAAM,SAAS,wCAAOA,SAAP,wBAAmBF,IAAnB,CAA0BC,KAA1B,IAAV,CAAb,CACD,CAHmC,CAGjC,CAACL,aAAD,CAHiC,CAApC,CAKA,QAASO,aAAT,CAAsBL,GAAtB,CAA2B,CACzBA,GAAG,CAACM,cAAJ,GACAC,aAAa,CAAC,IAAD,CAAb,CACAb,cAAc,CACZ,CAACc,MAAM,CAAEb,QAAQ,CAACc,OAAT,CAAiBN,KAA1B,CACAO,eAAe,CAAE,0BAAI,CACnBH,aAAa,CAAC,KAAD,CAAb,CACD,CAHD,CADY,CAAd,CAMD,CAEDlB,SAAS,CAAC,UAAM,CACdM,QAAQ,CAACc,OAAT,CAAiBN,KAAjB,CAAyB,EAAzB,CACD,CAFQ,CAEP,CAACL,aAAD,CAAgBN,MAAhB,CAFO,CAAT,CAIA,QAASe,cAAT,CAAuBI,SAAvB,CAAiC,CAC/BA,SAAS,CAAGd,sBAAsB,CAAC,eAAD,CAAzB,CAA6CA,sBAAsB,CAAC,WAAD,CAA5E,CACD,CAED,mBACE,MAAC,aAAD,EACE,IAAI,CAAC,aADP,CAEE,KAAK,CAAC,uFAFR,CAGE,MAAM,CAAEL,MAHV,CAIE,OAAO,CAAEC,OAJX,CAKE,QAAQ,CAAEY,YALZ,wBAME,aAAK,SAAS,CAAC,aAAf,wBACE,cACE,GAAG,CAAEV,QADP,CAEE,QAAQ,CAAEI,gBAFZ,CAGE,SAAS,CAAC,2CAHZ,CAIE,IAAI,CAAC,KAJP,CAKE,EAAE,CAAC,QALL,CAME,IAAI,CAAC,QANP,CAOE,QAAQ,KAPV,CAQE,WAAW,CAAC,oIARd,EADF,cAUE,aAAM,SAAS,CAAC,mBAAhB,CAAoC,EAAE,CAAC,cAAvC,EAVF,GANF,cAkBE,eAAQ,SAAS,CAAC,aAAlB,CAAgC,IAAI,CAAC,QAArC,UAA+CH,qBAA/C,EAlBF,GADF,CAsBD,CAED,cAAeL,gBAAf"},"metadata":{},"sourceType":"module"}