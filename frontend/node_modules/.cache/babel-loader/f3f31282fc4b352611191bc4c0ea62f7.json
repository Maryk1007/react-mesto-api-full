{"ast":null,"code":"var _jsxFileName = \"/Users/ivanlapsov/dev/mesto-react/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { api } from \"../utils/api.js\";\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport FormWithProfile from './FormWithProfile.js';\nimport FormWithAvatar from './FormWithAvatar.js';\nimport FormWithPhoto from './FormWithPhoto.js';\nimport FormConfirmDelete from './FormConfirmDelete.js';\nimport ImagePopup from './ImagePopup.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isPopupProfileOpen, setIsPopupProfileOpen] = React.useState(false);\n  const [isPopupPhotoOpen, setIsPopupPhotoOpen] = React.useState(false);\n  const [isPopupAvatarOpen, setIsPopupAvatarOpen] = React.useState(false);\n  const [selectCard, setSelectCard] = React.useState({});\n  React.useEffect(() => {\n    Promise.all([api.getProfile(), api.getCardItems()]).then(_ref => {\n      let [res, cards] = _ref;\n      setCurrentUser(res);\n      setCards(cards);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  function handleEditProfileClick() {\n    setIsPopupProfileOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsPopupPhotoOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsPopupAvatarOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsPopupProfileOpen(false);\n    setIsPopupPhotoOpen(false);\n    setIsPopupAvatarOpen(false);\n    setSelectCard({});\n  }\n\n  function handleCardClick(card) {\n    setSelectCard(card);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    if (!isLiked) {\n      api.addLike(card._id).then(newCard => {\n        setCards(state => state.map(c => c._id === card._id ? newCard : c));\n      }).catch(console.log);\n    } else {\n      api.deleteLike(card._id).then(newCard => {\n        setCards(state => state.map(c => c._id === card._id ? newCard : c));\n      }).catch(console.log);\n    }\n  }\n\n  function handleCardDelete() {}\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n      value: currentUser,\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        cards: cards,\n        onEditProfile: handleEditProfileClick,\n        onAddPlace: handleAddPlaceClick,\n        onEditAvatar: handleEditAvatarClick,\n        onCardClick: handleCardClick,\n        onCardLike: handleCardLike,\n        onCardDelete: handleCardDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PopupWithForm, {\n        name: \"profile\",\n        title: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",\n        isOpen: isPopupProfileOpen,\n        onClose: closeAllPopups,\n        children: /*#__PURE__*/_jsxDEV(FormWithProfile, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PopupWithForm, {\n        name: \"edit-avatar\",\n        title: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",\n        isOpen: isPopupAvatarOpen,\n        onClose: closeAllPopups,\n        children: /*#__PURE__*/_jsxDEV(FormWithAvatar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PopupWithForm, {\n        name: \"photo\",\n        title: \"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\",\n        isOpen: isPopupPhotoOpen,\n        onClose: closeAllPopups,\n        children: /*#__PURE__*/_jsxDEV(FormWithPhoto, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PopupWithForm, {\n        name: \"confirm-delete\",\n        title: \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",\n        children: /*#__PURE__*/_jsxDEV(FormConfirmDelete, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        card: selectCard,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"rctwNVCrdQVSJGnKmYl6QWaNCBo=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","api","Header","Main","Footer","PopupWithForm","FormWithProfile","FormWithAvatar","FormWithPhoto","FormConfirmDelete","ImagePopup","CurrentUserContext","App","currentUser","setCurrentUser","useState","cards","setCards","isPopupProfileOpen","setIsPopupProfileOpen","isPopupPhotoOpen","setIsPopupPhotoOpen","isPopupAvatarOpen","setIsPopupAvatarOpen","selectCard","setSelectCard","useEffect","Promise","all","getProfile","getCardItems","then","res","catch","err","console","log","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","closeAllPopups","handleCardClick","card","handleCardLike","isLiked","likes","some","i","_id","addLike","newCard","state","map","c","deleteLike","handleCardDelete"],"sources":["/Users/ivanlapsov/dev/mesto-react/src/components/App.js"],"sourcesContent":["import React from 'react';\nimport {api} from \"../utils/api.js\"\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport FormWithProfile from './FormWithProfile.js';\nimport FormWithAvatar from './FormWithAvatar.js';\nimport FormWithPhoto from './FormWithPhoto.js';\nimport FormConfirmDelete from './FormConfirmDelete.js';\nimport ImagePopup from './ImagePopup.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\n\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isPopupProfileOpen, setIsPopupProfileOpen] = React.useState(false);\n  const [isPopupPhotoOpen, setIsPopupPhotoOpen] = React.useState(false);\n  const [isPopupAvatarOpen, setIsPopupAvatarOpen] = React.useState(false);\n  const [selectCard, setSelectCard] = React.useState({});\n\n  React.useEffect(() =>{\n    Promise.all([api.getProfile(), api.getCardItems()])\n      .then(([res, cards]) => {\n        setCurrentUser(res);\n        setCards(cards);\n      })\n      .catch(err => {\n        console.log(err)\n      });\n  }, [])\n\n  function handleEditProfileClick() {\n    setIsPopupProfileOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsPopupPhotoOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsPopupAvatarOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsPopupProfileOpen(false);\n    setIsPopupPhotoOpen(false);\n    setIsPopupAvatarOpen(false);\n    setSelectCard({});\n  }\n\n  function handleCardClick(card) {\n    setSelectCard(card)\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    if(!isLiked) {\n      api.addLike(card._id)\n        .then((newCard) => {\n          setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch(console.log)\n    } else {\n      api.deleteLike(card._id)\n        .then((newCard) => {\n          setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch(console.log)\n    }\n  }\n\n  function handleCardDelete() {\n\n  }\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n        <Main\n        cards={cards}\n        onEditProfile={handleEditProfileClick}\n        onAddPlace={handleAddPlaceClick}\n        onEditAvatar={handleEditAvatarClick}\n        onCardClick={handleCardClick}\n        onCardLike={handleCardLike}\n        onCardDelete={handleCardDelete}\n        />\n        <Footer />\n        <PopupWithForm name=\"profile\" title=\"Редактировать профиль\" isOpen={isPopupProfileOpen} onClose={closeAllPopups}>\n          <FormWithProfile/>\n        </PopupWithForm>\n        <PopupWithForm name=\"edit-avatar\" title=\"Обновить аватар\" isOpen={isPopupAvatarOpen} onClose={closeAllPopups}>\n          <FormWithAvatar/>\n        </PopupWithForm>\n        <PopupWithForm name=\"photo\" title=\"Новое место\" isOpen={isPopupPhotoOpen} onClose={closeAllPopups}>\n          <FormWithPhoto/>\n        </PopupWithForm>\n        <PopupWithForm name=\"confirm-delete\" title=\"Вы уверены?\">\n          <FormConfirmDelete/>\n        </PopupWithForm>\n        <ImagePopup card={selectCard} onClose={closeAllPopups}/>\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}