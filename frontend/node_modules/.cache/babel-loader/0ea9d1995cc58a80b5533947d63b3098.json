{"ast":null,"code":"import _defineProperty from\"/Users/ivanlapsov/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ivanlapsov/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ivanlapsov/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import PopupWithForm from\"./PopupWithForm.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddPlacePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdatePhoto=_ref.onUpdatePhoto;var _React$useState=React.useState(\"Создать\"),_React$useState2=_slicedToArray(_React$useState,2),isContentSubmitButton=_React$useState2[0],setContentSubmitButton=_React$useState2[1];var _React$useState3=React.useState({name:\"\",link:\"\"}),_React$useState4=_slicedToArray(_React$useState3,2),formValues=_React$useState4[0],setFormValues=_React$useState4[1];var name=formValues.name,link=formValues.link;var handleFormValues=React.useCallback(function(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormValues(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});},[setFormValues]);React.useEffect(function(){setFormValues({name:\"\",link:\"\"});},[setFormValues,isOpen]);function handleSubmit(evt){evt.preventDefault();renderLoading(true);onUpdatePhoto({name:name,link:link,onRenderLoading:function onRenderLoading(){renderLoading(false);}});}function renderLoading(isLoading){isLoading?setContentSubmitButton(\"Сохранение...\"):setContentSubmitButton(\"Создать\");}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"photo\",title:\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\",isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_field_title\",value:name||\"\",onChange:handleFormValues,type:\"text\",id:\"photoName\",name:\"name\",required:true,minLength:\"2\",maxLength:\"30\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form__field-error\",id:\"error-photoName\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_field_link\",value:link||\"\",onChange:handleFormValues,type:\"url\",id:\"photoLink\",name:\"link\",required:true,placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form__field-error\",id:\"error-photoLink\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-save\",type:\"submit\",children:isContentSubmitButton})]});}export default AddPlacePopup;","map":{"version":3,"names":["React","PopupWithForm","AddPlacePopup","isOpen","onClose","onUpdatePhoto","useState","isContentSubmitButton","setContentSubmitButton","name","link","formValues","setFormValues","handleFormValues","useCallback","evt","target","value","prevState","useEffect","handleSubmit","preventDefault","renderLoading","onRenderLoading","isLoading"],"sources":["/Users/ivanlapsov/dev/react-mesto-auth/src/components/AddPlacePopup.js"],"sourcesContent":["import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\n\nfunction AddPlacePopup({ isOpen, onClose, onUpdatePhoto }) {\n  const [isContentSubmitButton, setContentSubmitButton] =\n    React.useState(\"Создать\");\n\n  const [formValues, setFormValues] = React.useState({\n    name: \"\",\n    link: \"\",\n  });\n  const { name, link } = formValues;\n\n  const handleFormValues = React.useCallback(\n    (evt) => {\n      const { name, value } = evt.target;\n      setFormValues((prevState) => ({ ...prevState, [name]: value }));\n    },\n    [setFormValues]\n  );\n\n  React.useEffect(() => {\n    setFormValues({\n      name: \"\",\n      link: \"\",\n    });\n  }, [setFormValues, isOpen]);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    renderLoading(true);\n    onUpdatePhoto({\n      name,\n      link,\n      onRenderLoading: () => {\n        renderLoading(false);\n      },\n    });\n  }\n\n  function renderLoading(isLoading) {\n    isLoading\n      ? setContentSubmitButton(\"Сохранение...\")\n      : setContentSubmitButton(\"Создать\");\n  }\n\n  return (\n    <PopupWithForm\n      name=\"photo\"\n      title=\"Новое место\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <div className=\"form__field\">\n        <input\n          className=\"form__input form__input_field_title\"\n          value={name || \"\"}\n          onChange={handleFormValues}\n          type=\"text\"\n          id=\"photoName\"\n          name=\"name\"\n          required\n          minLength=\"2\"\n          maxLength=\"30\"\n          placeholder=\"Название\"\n        />\n        <span className=\"form__field-error\" id=\"error-photoName\"></span>\n      </div>\n      <div className=\"form__field\">\n        <input\n          className=\"form__input form__input_field_link\"\n          value={link || \"\"}\n          onChange={handleFormValues}\n          type=\"url\"\n          id=\"photoLink\"\n          name=\"link\"\n          required\n          placeholder=\"Ссылка на картинку\"\n        />\n        <span className=\"form__field-error\" id=\"error-photoLink\"></span>\n      </div>\n      <button className=\"button-save\" type=\"submit\">\n        {isContentSubmitButton}\n      </button>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n"],"mappings":"qXAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,cAAP,KAA0B,oBAA1B,C,wFAEA,QAASC,cAAT,MAA2D,IAAlCC,OAAkC,MAAlCA,MAAkC,CAA1BC,OAA0B,MAA1BA,OAA0B,CAAjBC,aAAiB,MAAjBA,aAAiB,CACzD,oBACEL,KAAK,CAACM,QAAN,CAAe,SAAf,CADF,oDAAOC,qBAAP,qBAA8BC,sBAA9B,qBAGA,qBAAoCR,KAAK,CAACM,QAAN,CAAe,CACjDG,IAAI,CAAE,EAD2C,CAEjDC,IAAI,CAAE,EAF2C,CAAf,CAApC,qDAAOC,UAAP,qBAAmBC,aAAnB,qBAIA,GAAQH,KAAR,CAAuBE,UAAvB,CAAQF,IAAR,CAAcC,IAAd,CAAuBC,UAAvB,CAAcD,IAAd,CAEA,GAAMG,iBAAgB,CAAGb,KAAK,CAACc,WAAN,CACvB,SAACC,GAAD,CAAS,CACP,gBAAwBA,GAAG,CAACC,MAA5B,CAAQP,IAAR,aAAQA,IAAR,CAAcQ,KAAd,aAAcA,KAAd,CACAL,aAAa,CAAC,SAACM,SAAD,wCAAqBA,SAArB,wBAAiCT,IAAjC,CAAwCQ,KAAxC,IAAD,CAAb,CACD,CAJsB,CAKvB,CAACL,aAAD,CALuB,CAAzB,CAQAZ,KAAK,CAACmB,SAAN,CAAgB,UAAM,CACpBP,aAAa,CAAC,CACZH,IAAI,CAAE,EADM,CAEZC,IAAI,CAAE,EAFM,CAAD,CAAb,CAID,CALD,CAKG,CAACE,aAAD,CAAgBT,MAAhB,CALH,EAOA,QAASiB,aAAT,CAAsBL,GAAtB,CAA2B,CACzBA,GAAG,CAACM,cAAJ,GACAC,aAAa,CAAC,IAAD,CAAb,CACAjB,aAAa,CAAC,CACZI,IAAI,CAAJA,IADY,CAEZC,IAAI,CAAJA,IAFY,CAGZa,eAAe,CAAE,0BAAM,CACrBD,aAAa,CAAC,KAAD,CAAb,CACD,CALW,CAAD,CAAb,CAOD,CAED,QAASA,cAAT,CAAuBE,SAAvB,CAAkC,CAChCA,SAAS,CACLhB,sBAAsB,CAAC,eAAD,CADjB,CAELA,sBAAsB,CAAC,SAAD,CAF1B,CAGD,CAED,mBACE,MAAC,aAAD,EACE,IAAI,CAAC,OADP,CAEE,KAAK,CAAC,+DAFR,CAGE,MAAM,CAAEL,MAHV,CAIE,OAAO,CAAEC,OAJX,CAKE,QAAQ,CAAEgB,YALZ,wBAOE,aAAK,SAAS,CAAC,aAAf,wBACE,cACE,SAAS,CAAC,qCADZ,CAEE,KAAK,CAAEX,IAAI,EAAI,EAFjB,CAGE,QAAQ,CAAEI,gBAHZ,CAIE,IAAI,CAAC,MAJP,CAKE,EAAE,CAAC,WALL,CAME,IAAI,CAAC,MANP,CAOE,QAAQ,KAPV,CAQE,SAAS,CAAC,GARZ,CASE,SAAS,CAAC,IATZ,CAUE,WAAW,CAAC,kDAVd,EADF,cAaE,aAAM,SAAS,CAAC,mBAAhB,CAAoC,EAAE,CAAC,iBAAvC,EAbF,GAPF,cAsBE,aAAK,SAAS,CAAC,aAAf,wBACE,cACE,SAAS,CAAC,oCADZ,CAEE,KAAK,CAAEH,IAAI,EAAI,EAFjB,CAGE,QAAQ,CAAEG,gBAHZ,CAIE,IAAI,CAAC,KAJP,CAKE,EAAE,CAAC,WALL,CAME,IAAI,CAAC,MANP,CAOE,QAAQ,KAPV,CAQE,WAAW,CAAC,oGARd,EADF,cAWE,aAAM,SAAS,CAAC,mBAAhB,CAAoC,EAAE,CAAC,iBAAvC,EAXF,GAtBF,cAmCE,eAAQ,SAAS,CAAC,aAAlB,CAAgC,IAAI,CAAC,QAArC,UACGN,qBADH,EAnCF,GADF,CAyCD,CAED,cAAeL,cAAf"},"metadata":{},"sourceType":"module"}