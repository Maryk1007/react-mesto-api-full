{"ast":null,"code":"import _defineProperty from\"/Users/ivanlapsov/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ivanlapsov/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ivanlapsov/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import PopupWithForm from\"./PopupWithForm.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateAvatar=_ref.onUpdateAvatar;var imageRef=React.useRef();var _React$useState=React.useState('Сохранить'),_React$useState2=_slicedToArray(_React$useState,2),isContentSubmitButton=_React$useState2[0],setContentSubmitButton=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),formValues=_React$useState4[0],setFormValues=_React$useState4[1];var handleFormValues=React.useCallback(function(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormValues(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});},[setFormValues]);function handleSubmit(evt){evt.preventDefault();renderLoading(true);onUpdateAvatar({avatar:imageRef.current.value,onRenderLoading:function onRenderLoading(){renderLoading(false);}});}React.useEffect(function(){imageRef.current.value='';},[setFormValues,isOpen]);function renderLoading(isLoading){isLoading?setContentSubmitButton('Сохранение...'):setContentSubmitButton('Сохранить');}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"edit-avatar\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsx(\"input\",{ref:imageRef,onChange:handleFormValues,className:\"form__input form__input_field_link-avatar\",type:\"url\",id:\"avatar\",name:\"avatar\",required:true,placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0432\\u0430\\u0448\\u0435 \\u043D\\u043E\\u0432\\u043E\\u0435 \\u0444\\u043E\\u0442\\u043E\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form__field-error\",id:\"error-avatar\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-save\",type:\"submit\",children:isContentSubmitButton})]});}export default EditAvatarPopup;","map":{"version":3,"names":["React","PopupWithForm","EditAvatarPopup","isOpen","onClose","onUpdateAvatar","imageRef","useRef","useState","isContentSubmitButton","setContentSubmitButton","formValues","setFormValues","handleFormValues","useCallback","evt","target","name","value","prevState","handleSubmit","preventDefault","renderLoading","avatar","current","onRenderLoading","useEffect","isLoading"],"sources":["/Users/ivanlapsov/dev/mesto-react/src/components/EditAvatarPopup.js"],"sourcesContent":["import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\n\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\n  const imageRef = React.useRef();\n  const [isContentSubmitButton, setContentSubmitButton] = React.useState('Сохранить');\n  const [formValues ,setFormValues] = React.useState('');\n\n  const handleFormValues = React.useCallback((evt)=>{\n    const { name, value } = evt.target\n    setFormValues(prevState=>({...prevState, [name]: value}))\n  }, [setFormValues]);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    renderLoading(true);\n    onUpdateAvatar(\n      {avatar: imageRef.current.value,\n      onRenderLoading: ()=>{\n        renderLoading(false)\n      }\n    })\n  }\n\n  React.useEffect(() => {\n    imageRef.current.value = ''\n  },[setFormValues, isOpen])\n\n  function renderLoading(isLoading){\n    isLoading ? setContentSubmitButton('Сохранение...') : setContentSubmitButton('Сохранить')\n  }\n\n  return(\n    <PopupWithForm\n      name=\"edit-avatar\"\n      title=\"Обновить аватар\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}>\n      <div className=\"form__field\">\n        <input\n          ref={imageRef}\n          onChange={handleFormValues}\n          className=\"form__input form__input_field_link-avatar\"\n          type=\"url\"\n          id=\"avatar\"\n          name=\"avatar\"\n          required\n          placeholder=\"Ссылка на ваше новое фото\"/>\n        <span className=\"form__field-error\" id=\"error-avatar\"></span>\n      </div>\n      <button className=\"button-save\" type=\"submit\">{isContentSubmitButton}</button>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n"],"mappings":"sWAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,cAAP,KAA0B,oBAA1B,C,wFAEA,QAASC,gBAAT,MAA4D,IAAlCC,OAAkC,MAAlCA,MAAkC,CAA1BC,OAA0B,MAA1BA,OAA0B,CAAjBC,cAAiB,MAAjBA,cAAiB,CAC1D,GAAMC,SAAQ,CAAGN,KAAK,CAACO,MAAN,EAAjB,CACA,oBAAwDP,KAAK,CAACQ,QAAN,CAAe,WAAf,CAAxD,oDAAOC,qBAAP,qBAA8BC,sBAA9B,qBACA,qBAAoCV,KAAK,CAACQ,QAAN,CAAe,EAAf,CAApC,qDAAOG,UAAP,qBAAmBC,aAAnB,qBAEA,GAAMC,iBAAgB,CAAGb,KAAK,CAACc,WAAN,CAAkB,SAACC,GAAD,CAAO,CAChD,gBAAwBA,GAAG,CAACC,MAA5B,CAAQC,IAAR,aAAQA,IAAR,CAAcC,KAAd,aAAcA,KAAd,CACAN,aAAa,CAAC,SAAAO,SAAS,wCAAOA,SAAP,wBAAmBF,IAAnB,CAA0BC,KAA1B,IAAV,CAAb,CACD,CAHwB,CAGtB,CAACN,aAAD,CAHsB,CAAzB,CAKA,QAASQ,aAAT,CAAsBL,GAAtB,CAA2B,CACzBA,GAAG,CAACM,cAAJ,GACAC,aAAa,CAAC,IAAD,CAAb,CACAjB,cAAc,CACZ,CAACkB,MAAM,CAAEjB,QAAQ,CAACkB,OAAT,CAAiBN,KAA1B,CACAO,eAAe,CAAE,0BAAI,CACnBH,aAAa,CAAC,KAAD,CAAb,CACD,CAHD,CADY,CAAd,CAMD,CAEDtB,KAAK,CAAC0B,SAAN,CAAgB,UAAM,CACpBpB,QAAQ,CAACkB,OAAT,CAAiBN,KAAjB,CAAyB,EAAzB,CACD,CAFD,CAEE,CAACN,aAAD,CAAgBT,MAAhB,CAFF,EAIA,QAASmB,cAAT,CAAuBK,SAAvB,CAAiC,CAC/BA,SAAS,CAAGjB,sBAAsB,CAAC,eAAD,CAAzB,CAA6CA,sBAAsB,CAAC,WAAD,CAA5E,CACD,CAED,mBACE,MAAC,aAAD,EACE,IAAI,CAAC,aADP,CAEE,KAAK,CAAC,uFAFR,CAGE,MAAM,CAAEP,MAHV,CAIE,OAAO,CAAEC,OAJX,CAKE,QAAQ,CAAEgB,YALZ,wBAME,aAAK,SAAS,CAAC,aAAf,wBACE,cACE,GAAG,CAAEd,QADP,CAEE,QAAQ,CAAEO,gBAFZ,CAGE,SAAS,CAAC,2CAHZ,CAIE,IAAI,CAAC,KAJP,CAKE,EAAE,CAAC,QALL,CAME,IAAI,CAAC,QANP,CAOE,QAAQ,KAPV,CAQE,WAAW,CAAC,oIARd,EADF,cAUE,aAAM,SAAS,CAAC,mBAAhB,CAAoC,EAAE,CAAC,cAAvC,EAVF,GANF,cAkBE,eAAQ,SAAS,CAAC,aAAlB,CAAgC,IAAI,CAAC,QAArC,UAA+CJ,qBAA/C,EAlBF,GADF,CAsBD,CAED,cAAeP,gBAAf"},"metadata":{},"sourceType":"module"}